<div class="page-header">
    <h2>Ajustes del Sistema</h2>
    <button id="btn-abrir-ajustes" class="btn btn-primary">‚öôÔ∏è Configurar Ajustes</button>
</div>

<div class="page-content">
    <div class="info-box">
        <h3>Configuraci√≥n del Sistema</h3>
        <p>Desde aqu√≠ puedes ajustar los porcentajes de comisi√≥n para cada empleado en las n√≥minas.</p>
        <p>Haz clic en "Configurar Ajustes" para abrir el panel de configuraci√≥n.</p>
    </div>
</div>

<!-- Modal de Ajustes -->
<div id="ajustes-modal" class="modal" style="display: none;">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h3>Ajustes del Sistema</h3>
            <button class="modal-close" id="close-ajustes-modal">&times;</button>
        </div>
        <div class="modal-body">
            <!-- Tabs -->
            <div class="tabs-container">
                <div class="tabs">
                    <button class="tab-button active" data-tab="porcentajes-nomina">Porcentajes de N√≥mina</button>
                    <button class="tab-button" data-tab="seguridad">Seguridad</button>
                    <button class="tab-button" data-tab="apariencia">Apariencia</button>
                    <button class="tab-button" data-tab="respaldo">Respaldo</button>
                    <button class="tab-button" data-tab="reportes">Reportes</button>
                    <button class="tab-button" data-tab="actualizaciones">Actualizaciones</button>
                </div>
                
                <!-- Tab: Porcentajes de N√≥mina -->
                <div class="tab-content active" id="tab-porcentajes-nomina">
                    <div class="form-section">
                        <h4>Configurar Porcentaje de Comisi√≥n por Empleado</h4>
                        <p class="form-description">
                            Ajusta el porcentaje de comisi√≥n que se aplicar√° a cada empleado al calcular las n√≥minas.
                            El porcentaje se aplica sobre las comisiones ganadas (servicios realizados).
                        </p>
                        <div id="empleados-porcentajes-container">
                            <div class="loading">Cargando empleados...</div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab: Seguridad -->
                <div class="tab-content" id="tab-seguridad">
                    <div class="form-section">
                        <h4>Protecci√≥n con Contrase√±a</h4>
                        <p class="form-description">
                            Las operaciones cr√≠ticas (cerrar transacciones, generar n√≥minas, generar reportes del d√≠a) 
                            requerir√°n la contrase√±a del usuario actual cada vez que se realicen.
                        </p>
                        <div class="info-box" style="background: var(--bg-tertiary); padding: 15px; border-radius: 6px; margin-top: 15px;">
                            <p style="color: var(--text-secondary); margin: 0;">
                                <strong>Operaciones protegidas:</strong><br>
                                ‚Ä¢ Cerrar transacciones<br>
                                ‚Ä¢ Generar n√≥minas<br>
                                ‚Ä¢ Generar reportes del d√≠a<br>
                                ‚Ä¢ Restaurar backups<br>
                                ‚Ä¢ Formatear base de datos
                            </p>
                        </div>
                        <div style="margin-top: 20px;">
                            <label class="checkbox-label">
                                <input type="checkbox" id="proteccion-contrase√±a" checked disabled>
                                <span>Protecci√≥n con contrase√±a activada (siempre activa)</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Tab: Apariencia -->
                <div class="tab-content" id="tab-apariencia">
                    <div class="form-section">
                        <h4>Modo Claro/Oscuro</h4>
                        <p class="form-description">
                            Cambia entre modo claro y oscuro. Los cambios se aplican inmediatamente y se guardan autom√°ticamente.
                        </p>
                        <div style="margin-top: 20px;">
                            <label class="radio-label" style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <input type="radio" name="modo-apariencia" id="modo-oscuro" value="oscuro" checked>
                                <span>Modo Oscuro</span>
                            </label>
                            <label class="radio-label" style="display: flex; align-items: center; gap: 10px;">
                                <input type="radio" name="modo-apariencia" id="modo-claro" value="claro">
                                <span>Modo Claro</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-section" style="margin-top: 40px; border-top: 1px solid var(--border-color); padding-top: 30px;">
                        <h4>Personalizaci√≥n</h4>
                        <p class="form-description">
                            Configura las preferencias de personalizaci√≥n del sistema.
                        </p>
                        <div style="margin-top: 20px;">
                            <label class="checkbox-label" style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" id="tutoriales-activos">
                                <span>Activar tutoriales interactivos</span>
                            </label>
                            <small style="color: var(--text-secondary); font-size: 12px; margin-top: 5px; display: block; margin-left: 28px;">
                                Cuando est√° activado, el sistema mostrar√° tutoriales interactivos para ayudarte a aprender a usar las diferentes funcionalidades.
                            </small>
                        </div>
                    </div>
                </div>
                
                <!-- Tab: Respaldo -->
                <div class="tab-content" id="tab-respaldo">
                    <div class="form-section">
                        <h4>Respaldo Autom√°tico</h4>
                        <p class="form-description">
                            Configura el respaldo autom√°tico de la base de datos. Los backups se guardan en la carpeta de backups 
                            de la aplicaci√≥n y se mantienen los √∫ltimos 20 backups.
                        </p>
                        <div style="margin-top: 20px;">
                            <label class="checkbox-label" style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <input type="checkbox" id="respaldo-automatico-activo">
                                <span>Activar respaldo autom√°tico</span>
                            </label>
                            
                            <div class="form-group" style="margin-top: 20px;">
                                <label for="frecuencia-respaldo">Frecuencia de Respaldo</label>
                                <select id="frecuencia-respaldo" class="form-select">
                                    <option value="cada-hora">Cada hora</option>
                                    <option value="cada-6-horas">Cada 6 horas</option>
                                    <option value="diario">Diario</option>
                                    <option value="semanal">Semanal</option>
                                </select>
                            </div>
                            
                            <div class="info-box" style="background: var(--bg-tertiary); padding: 15px; border-radius: 6px; margin-top: 20px;">
                                <p style="color: var(--text-secondary); margin: 0;">
                                    <strong>Informaci√≥n:</strong><br>
                                    ‚Ä¢ Se mantienen los √∫ltimos 20 backups<br>
                                    ‚Ä¢ Los backups m√°s antiguos se eliminan autom√°ticamente<br>
                                    ‚Ä¢ Se notificar√° si un respaldo falla
                                </p>
                            </div>
                        </div>
                        
                        <div style="margin-top: 40px; border-top: 1px solid var(--border-color); padding-top: 30px;">
                            <h4>Restaurar Backup</h4>
                            <p class="form-description">
                                Selecciona un backup para restaurar. Esta operaci√≥n requiere confirmaci√≥n y contrase√±a.
                            </p>
                            <div id="backups-lista-container" style="margin-top: 15px;">
                                <div class="loading">Cargando backups...</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 40px; border-top: 1px solid var(--border-color); padding-top: 30px;">
                            <h4 style="color: var(--error-color);">Zona de Peligro</h4>
                            <p class="form-description" style="color: var(--error-color);">
                                <strong>Formatear Base de Datos:</strong> Esta acci√≥n eliminar√° todos los datos y crear√° un backup autom√°tico antes de formatear.
                            </p>
                            <button type="button" class="btn btn-danger" id="btn-formatear-bd" style="margin-top: 15px;">
                                Formatear Base de Datos
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Tab: Reportes -->
                <div class="tab-content" id="tab-reportes">
                    <div class="form-section">
                        <h4>Reportes Autom√°ticos</h4>
                        <p class="form-description">
                            Configura la generaci√≥n autom√°tica de reportes diarios. Los reportes se generan siempre, 
                            incluso si no hay transacciones ese d√≠a, y se guardan en la base de datos.
                        </p>
                        <div style="margin-top: 20px;">
                            <label class="checkbox-label" style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                                <input type="checkbox" id="reportes-automaticos-activo">
                                <span>Activar generaci√≥n autom√°tica de reportes</span>
                            </label>
                            
                            <div class="form-group">
                                <label for="hora-reportes">Hora de Generaci√≥n</label>
                                <input type="time" id="hora-reportes" class="form-input" value="23:00">
                                <small style="color: var(--text-secondary); font-size: 12px; margin-top: 5px; display: block;">
                                    Hora en formato 24 horas (HH:MM)
                                </small>
                            </div>
                            
                            <div class="info-box" style="background: var(--bg-tertiary); padding: 15px; border-radius: 6px; margin-top: 20px;">
                                <p style="color: var(--text-secondary); margin: 0;">
                                    <strong>Informaci√≥n:</strong><br>
                                    ‚Ä¢ Los reportes se generan todos los d√≠as a la hora especificada<br>
                                    ‚Ä¢ Se generan incluso si no hay transacciones<br>
                                    ‚Ä¢ Los reportes se guardan en la base de datos y pueden visualizarse en el m√≥dulo de Reportes
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab: Actualizaciones -->
                <div class="tab-content" id="tab-actualizaciones">
                    <div class="form-section">
                        <h4>Verificaci√≥n de Actualizaciones</h4>
                        <p class="form-description">
                            Configura la frecuencia con la que el sistema verifica autom√°ticamente si hay nuevas versiones disponibles.
                        </p>
                        <div style="margin-top: 20px;">
                            <div class="form-group">
                                <label for="frecuencia-actualizaciones">Frecuencia de Verificaci√≥n</label>
                                <select id="frecuencia-actualizaciones" class="form-select">
                                    <option value="cada-hora">Cada hora</option>
                                    <option value="cada-6-horas">Cada 6 horas</option>
                                    <option value="cada-12-horas">Cada 12 horas</option>
                                    <option value="diario">Diario (cada 24 horas)</option>
                                </select>
                                <small style="color: var(--text-secondary); font-size: 12px; margin-top: 5px; display: block;">
                                    El sistema verificar√° autom√°ticamente si hay actualizaciones disponibles seg√∫n la frecuencia seleccionada.
                                </small>
                            </div>
                            
                            <div style="margin-top: 30px; border-top: 1px solid var(--border-color); padding-top: 20px;">
                                <h4 style="margin-bottom: 15px;">Verificaci√≥n Manual</h4>
                                <p class="form-description" style="margin-bottom: 15px;">
                                    Puedes verificar manualmente si hay actualizaciones disponibles en este momento.
                                </p>
                                <button type="button" class="btn btn-primary" id="btn-verificar-actualizaciones">
                                    üîç Buscar Actualizaciones
                                </button>
                                <small style="color: var(--text-secondary); font-size: 12px; margin-top: 10px; display: block;">
                                    Se te notificar√° si hay una nueva versi√≥n disponible.
                                </small>
                            </div>
                            
                            <div class="info-box" style="background: var(--bg-tertiary); padding: 15px; border-radius: 6px; margin-top: 20px;">
                                <p style="color: var(--text-secondary); margin: 0;">
                                    <strong>Informaci√≥n:</strong><br>
                                    ‚Ä¢ La verificaci√≥n se realiza en segundo plano<br>
                                    ‚Ä¢ Se te notificar√° cuando haya una actualizaci√≥n disponible<br>
                                    ‚Ä¢ Puedes verificar manualmente en cualquier momento usando el bot√≥n arriba
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-actions">
            <button type="button" class="btn btn-secondary" id="cancel-ajustes">Cancelar</button>
            <button type="button" class="btn btn-primary" id="guardar-ajustes">Guardar Cambios</button>
        </div>
    </div>
</div>

